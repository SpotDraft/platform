!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular-redux/store"),require("@angular/common"),require("@angular/core"),require("@angular/router"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@angular-redux/router",["exports","@angular-redux/store","@angular/common","@angular/core","@angular/router","rxjs/operators"],e):e((t["angular-redux"]=t["angular-redux"]||{},t["angular-redux"].router={}),null,t.ng.common,t.ng.core,t.ng.router,t.rxjs.operators)}(this,function(t,e,r,i,o,n){"use strict";var u="@angular-redux/router::UPDATE_LOCATION";var a=function(){function t(t,e,r,i){this.router=t,this.ngRedux=e,this.applicationRef=r,this.location=i,this.initialized=!1,this.selectLocationFromState=function(t){return t.router}}return t.prototype.destroy=function(){this.urlStateSubscription&&this.urlStateSubscription.unsubscribe(),this.reduxSubscription&&this.reduxSubscription.unsubscribe(),this.initialized=!1},t.prototype.initialize=function(t,e){if(void 0===t&&(t=function(t){return t.router}),this.initialized)throw new Error("@angular-redux/router already initialized! If you meant to re-initialize, call destroy first.");this.selectLocationFromState=t,this.urlState=e||this.getDefaultUrlStateObservable(),this.listenToRouterChanges(),this.listenToReduxChanges(),this.initialized=!0},t.prototype.getDefaultUrlStateObservable=function(){var e=this;return this.router.events.pipe(n.filter(function(t){return t instanceof o.NavigationEnd}),n.map(function(t){return e.location.path()}),n.distinctUntilChanged())},t.prototype.getLocationFromStore=function(t){return void 0===t&&(t=!1),this.selectLocationFromState(this.ngRedux.getState())||(t?this.initialLocation:"")},t.prototype.listenToRouterChanges=function(){var e=this;this.urlState&&(this.urlStateSubscription=this.urlState.subscribe(function(t){if(e.currentLocation!==t){if(e.currentLocation=t,e.initialLocation===undefined&&(e.initialLocation=t,e.getLocationFromStore()===e.currentLocation))return;e.ngRedux.dispatch({type:u,payload:t})}}))},t.prototype.listenToReduxChanges=function(){var r=this;this.reduxSubscription=this.ngRedux.select(function(t){return r.selectLocationFromState(t)}).pipe(n.distinctUntilChanged()).subscribe(function(t){if(r.initialLocation!==undefined){var e=r.getLocationFromStore(!0);r.currentLocation!==e&&(r.currentLocation=t,r.router.navigateByUrl(t))}})},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:o.Router},{type:e.NgRedux},{type:i.ApplicationRef},{type:r.Location}]},t}(),s=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[a]}},t.decorators=[{type:i.NgModule}],t}();t.NgReduxRouterModule=s,t.NgReduxRouter=a,t.routerReducer=function c(t,e){switch(void 0===t&&(t=""),e.type){case u:return e.payload||"";default:return t}},t.UPDATE_LOCATION=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-redux-router.umd.min.js.map